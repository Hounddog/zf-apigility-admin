<div ng-controller="ApiServiceInputController">
    <div class="ag-new-input">
        <button class="btn btn-info pull-left" title="Help"
            data-toggle="modal" data-target="#inputHelp">
            <span class="glyphicon glyphicon-info-sign"></span>
        </button>

        <form class="form-inline pull-right" ng-submit="addInput()">
            <div class="form-group">
                <input type="text" class="form-control input-xlarge" placeholder="Field name" ng-model="newInput">
            </div>
            <button type="submit" class="btn btn-sm btn-primary">Create New Field</button>
        </form>
    </div>
    <div class="ag-new-input clearfix"></div>

    <div class="ag panel-group tooltip-api">
        <collapse 
            class="panel-success"
            ng-repeat="input in service.input_filter">
            <collapse-header>
                <span class="btn btn-sm glyphicon glyphicon-info-sign pull-left"></span>

                <h4 class="panel-title pull-left">
                    <ag-edit-inplace name="input.name"></ag-edit-inplace>
                </h4>

                <button 
                    type="button" class="btn btn-sm btn-danger pull-right" title="Remove field"
                    collapse-button
                    ng-click="removeInput($index)">
                    <span class="glyphicon glyphicon-trash"></span>
                </button>

                <div class="clearfix"></div>
            </collapse-header>

            <collapse-body>
                <div class="panel-body">
                    <ng-include src="'zf-apigility-admin/partials/api/input-edit.html'" onload="index = $index; input = input"></ng-include>
                </div>
            </collapse-body>
        </collapse>
    </div>

    <div class="ag-new-input btn-group pull-right">
        <!-- todo Make the "cancel" action revert  -->
        <button type="button" class="btn btn-sm btn-default"
            collapse-flag flags="{edit: false}">Cancel</button>
        <button type="submit" class="btn btn-sm btn-success" ng-click="saveInput()">Save Changes</button>
    </div>
</div>

<ng-include src="'zf-apigility-admin/partials/api/help-input-filter.html'"></ng-include>

