<ng-include src="'zf-apigility-admin/partials/api/version.html'"></ng-include>

<h2>Authorization</h2>

<p>A check means authorization is required.</p>

<table class="table table-bordered table-striped table-responsive">
    <thead>
        <tr class="success">
            <th>Controller Service Name</th>
            <th class="text-center">GET    <br><input type="checkbox" ng-click="updateColumn($event, 'GET')"    ng-disabled="!editable"></th>
            <th class="text-center">POST   <br><input type="checkbox" ng-click="updateColumn($event, 'POST')"   ng-disabled="!editable"></th>
            <th class="text-center">PATCH  <br><input type="checkbox" ng-click="updateColumn($event, 'PATCH')"  ng-disabled="!editable"></th>
            <th class="text-center">PUT    <br><input type="checkbox" ng-click="updateColumn($event, 'PUT')"    ng-disabled="!editable"></th>
            <th class="text-center">DELETE <br><input type="checkbox" ng-click="updateColumn($event, 'DELETE')" ng-disabled="!editable"></th>
            <th class="text-center">&nbsp;</th>
        </tr>
    </thead>

    <tbody>
        <tr ng-repeat="(name, data) in apiAuthorizations">
            <td>{{name | servicename}} </td>
            <td class="text-center"><input type="checkbox" ng-model="apiAuthorizations[name].GET" ng-disabled="!isEditable(name, 'GET')"></td>
            <td class="text-center"><input type="checkbox" ng-model="apiAuthorizations[name].POST" ng-disabled="!isEditable(name, 'POST')"></td>
            <td class="text-center"><input type="checkbox" ng-model="apiAuthorizations[name].PATCH" ng-disabled="!isEditable(name, 'PATCH')"></td>
            <td class="text-center"><input type="checkbox" ng-model="apiAuthorizations[name].PUT" ng-disabled="!isEditable(name, 'PUT')"></td>
            <td class="text-center"><input type="checkbox" ng-model="apiAuthorizations[name].DELETE" ng-disabled="!isEditable(name, 'DELETE')"></td>
            <td class="text-center success"><input type="checkbox" ng-click="updateRow($event, name)" ng-disabled="!editable"></td>
        </tr>
    </tbody>
</table>

<div class="btn-group pull-right">
    <!-- todo Create "cancel"/"reset" functionality -->
    <button class="btn btn-sm btn-default" type="button" ng-disabled="!editable">Cancel</button>
    <button class="btn btn-sm btn-success" type="button" ng-click="saveAuthorization()" ng-disabled="!editable">Save</button>
</div>

<div class="clearfix"></div>
